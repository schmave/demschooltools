@(m : Meeting)

@import helper._

@main("JC minutes from " + Application.formatMeetingDate(m.date), "jc") {

<h3>JC minutes from @Application.formatMeetingDate(m.date)</h3>
<p><a href="@routes.Application.printMeeting(m.id)" class="btn btn-success no-print">
1. Print minutes</a>
<a href="@routes.Application.viewMeetingResolutionPlans(m.id)"
class="btn btn-success no-print" style="margin-left: 75px">
2. Print @OrgConfig.get().str_res_plans</a>
<span class="no-print">or <a href="@routes.Application.downloadMeetingResolutionPlans(m.id)">
Download @OrgConfig.get().str_res_plans</a></span></p>
<p><a href="@routes.ApplicationEditing.editMeeting(m.id)" class="btn btn-warning no-print">
Edit minutes</a></p>


<p><i>Committee</i>:
@Html(
	m.people_at_meeting.map { p =>
		if(p.role == PersonAtMeeting.ROLE_JC_CHAIR) {
			"<b>" + p.person.getDisplayName() + "</b>"
		} else if(p.role == PersonAtMeeting.ROLE_JC_MEMBER) {
			p.person.getDisplayName()
		} else if(p.role == PersonAtMeeting.ROLE_JC_SUB) {
			"(" + p.person.getDisplayName() + ")"
		} else if(p.role == PersonAtMeeting.ROLE_NOTE_TAKER) {
			p.person.getDisplayName() + "*"
		}
	}.mkString(", ")
)
</p>

<h4>&nbsp;<br/>@OrgConfig.get().str_res_plans_cap</h4>
<table class="table resolution_plans">
	<thead><th width="100">Case</th><th width="20">Person</th><th width="220">Entry</th><th>@OrgConfig.get().str_res_plan_cap</th></thead>
	@for(c <- m.cases) {
		@for(charge <- c.charges) {
			@if( charge.person != null && charge.rule != null ) {
			<tr><td>@c.case_number</td><td>@charge.person.getDisplayName()</td>
				<td>@charge.rule.getNumber() @charge.rule.title</td>
					<td>@charge.resolution_plan
						@if( ! charge.plea.equals("Guilty") ) {
							<i>(Plea: @charge.plea)</i>
						}
						@if( charge.referred_to_sm ) {
							<br/>*** Referred to School Meeting ***
						}
						</td></tr>
			}
		}
	}
</table>

<h4>&nbsp;<br/>Case Notes</h4>
@caseTableOpen()
@for(c <- m.cases) {
	@if( !c.empty() ) {
		@caseTableRow(c, false)
	}
}

@for(c <- m.additional_cases) {
	<tr>
	<td><h5>#@c.case_number	@if( c.date_closed == null ) { (OPEN) }</h5></td>
	<td>Case discussed today, but kept open for further investigation. Latest notes available
		in meeting held on <a href="@routes.Application.viewMeeting(c.meeting.id)">
			@Application.yymmddDate(c.meeting.date)</a></td>
	</tr>

}
</table>

}

