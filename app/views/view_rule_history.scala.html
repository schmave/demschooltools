@(r : Entry, history : RuleHistory, recent_rps : Collection[ String ])(implicit request: play.mvc.Http.Request, messages: play.i18n.Messages)

@import helper._

@main("History of " + r.getNumber() + " " + r.title, "jc") {

@if(request.flash.getOptional("notice").isPresent()) {
    <div class="flash-error">@request.flash.getOptional("notice").get()</div>
}

<script type="text/javascript">
$(function() {
    $("table.sortable").each(function (i) {
        sorttable.init();
        sorttable.innerSortFunction.apply($(this).find("th")[1], []);
    });
});
</script>

<form method="GET">
<p>Show history from
<input type="date" name="start_date" value="@Application.forDateInput(history.start_date)"> to
<input type="date" name="end_date" value="@Application.forDateInput(history.end_date)">
<input type="submit">
</p>
</form>

@rule_history(r, history, recent_rps)

}