@(title: String, activeTab : String = "", menu : String = "crm")(content: Html)

@import com.feth.play.module.pa.views.html._

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>

        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/sorttable.js")" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"></link>
		<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.min.js"></script>
		<script src="http://malsup.github.io/jquery.form.js"></script>
		<script src="@routes.Assets.at("javascripts/handlebars.js")" type="text/javascript"></script>

		<script src="@routes.Assets.at("javascripts/main.js")" type="text/javascript"></script>
		<script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>
		<link rel="stylesheet" media="all" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">


		<link rel="stylesheet" media="all" href="@routes.Assets.at("stylesheets/main.css")">
		<link rel="stylesheet" media="print" href="@routes.Assets.at("stylesheets/print.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
    </head>
    <body>
		@ifAuth() { username =>
			<ul class="nav nav-tabs no-print">
			@if( menu.equals("jc") ) {
			<li @if(activeTab.equals("home")) { class="active" } ><a href="@routes.Application.index">Home</a>
			<li @if(activeTab.equals("weekly_report")) { class="active" } ><a href="@routes.Application.thisWeekReport">
					Weekly Report
				</a>
			<li @if(activeTab.equals("view_sm")) { class="active" } ><a href="@routes.Application.viewSchoolMeetingDecisions">View S.M. decisions</a>
			@if(Application.isCurrentUserEditor()) {
				<li @if(activeTab.equals("edit_today")) { class="active" } ><a href="@routes.ApplicationEditing.editTodaysMinutes">Edit today's minutes</a>
			}
			<li @if(activeTab.equals("view_manual")) { class="active" } ><a href="@routes.Application.viewManual">
					@OrgConfig.get().str_manual_title_short
				</a>
			} else { @if( menu.equals( "crm" ) ) {
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				  People
				  <b class="caret"></b>
				</a>
					<ul class="dropdown-menu">
					<li><a href="@routes.CRM.people()">Home</a></li>
					<li><a href="@routes.CRM.newPerson()">Add a person</a></li>
					</ul>
			<li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				  Tags
				  <b class="caret"></b>
				</a>
					<ul class="dropdown-menu">
						@for( kv <- Tag.getWithPrefixes() ) {
							@if( kv._2.size() > 1 ) {
								<li class="dropdown-submenu">
								<a tabindex="-1" href="#">@kv._1</a>
								<ul class="dropdown-menu">
								@for( t <- kv._2 ) {
									<li><a href="@routes.CRM.viewTag(t.id)">@t.title</a></li>
								}
								</ul></li>
							} else {
								@* There is only one tag, but the for loop is a nice way to bind
									the variable *@
								@for( t <- kv._2 ) {
									<li><a href="@routes.CRM.viewTag(t.id)">@t.title</a></li>
								}
							}
						}
					</ul>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				  Checklists
				  <b class="caret"></b>
				</a>
					<ul class="dropdown-menu">
						@for( l <- TaskList.find.where().eq("organization", Organization.getByHost()).findList() ) {
							<li><a href="@routes.CRM.viewTaskList(l.id)">@l.title</a></li>
							}
					</ul>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				  Donations
				  <b class="caret"></b>
				</a>
					<ul class="dropdown-menu">
					<li><a href="@routes.CRM.donations()">All</a></li>
						<li><a href="@routes.CRM.donationsNeedingThankYou()">need thank you</a></li>
						<li><a href="@routes.CRM.donationsNeedingIndiegogo()">need Indiegogo reward</a></li>
					</ul>
			@if(CRM.hasPendingEmail()) {
				<li @if(activeTab.equals("email")) { class="active" } >
					<a href="@routes.CRM.viewPendingEmail()">Pending Email <span class="label label-warning">1</span></a>
				</li>
			}
			<li>
			<form class="navbar-form navbar-left">
			<div class="form-group">
			   <input id="navbar_people_search" type="Search" placeholder="Search people..." class="form-control" />
			</div>
			</form>
			</li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				  Settings
				  <b class="caret"></b>
				</a>
					<ul class="dropdown-menu">
					<li><a href="@routes.CRM.viewMailchimpSettings()">Mailchimp</a></li>
					</ul>
			<li>
			} }

			<li style="float:right;"><a href="@com.feth.play.module.pa.controllers.routes.Authenticate.logout">
				@if(Application.isCurrentUserEditor()) {
					Logout
				} else { Login }
					</a>
			<li class="username"><a class="username">@username</a></li>

		</ul>
	}

		@content
    </body>
</html>
